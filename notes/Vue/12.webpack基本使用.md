![webpack打包](C:\Users\lenovo\Desktop\2019年11月19日始\notes\Vue\img\webpack打包.png)

# `webpack`配置文件

先`npm init`，在项目中自动生成一个`package.json`包。

再取一个名叫`webpack.config.js`的文件，内容如下：

```js
const path = require('path') // 用于第6行自动获取输出文件的绝对路径做铺垫

module.exports = {
    entry: './src/main.js', // 入口
    output: { // 出口,有别于入口,他有两个配置
        path: path.resolve(__dirname, 'dist'), // 输出路径,使用绝对路径,使用上述引入的 path 中的 resolve 方法,来自动找到当前的 webpack.config.js 是存在的根路径,后面的 dist 是指定的要输出的文件夹名称
        filename: 'bundle.js' // 指定文件夹中具体的文件名
    }
}
```

有了上述的配置之后，我们只要敲击`webpack`就可以将我们的代码更快捷地进行打包了。:happy:

但是感觉单纯敲一个`webpack`有点呆，我们还是习惯于使用打包命令`npm run build`进行打包，所以：

```js
// 回到package.json文件中,处理一下scripts字段
"scripts": {
    "build": "webpack" // 加上这么一条,当我们敲击npm run build的时候,就会来这里找到后面的webpack命令,并且执行该命令; 还有就是加上这条指令之后,就会优先执行本地的webpack进行打包,而非全局版本的webpack进行打包
}
```

**本地安装webpack**：为什么要在本地进行安装？因为上述方式通过`script`将打包命令给改写的这种方式，优先会从本地进行查找。这样有什么好处呢？当我们下载项目到本地的时候，如果我们全局`webpack`版本不同于项目中配置的`webpack`版本，那么在进行打包的时候就会报错。但是只要经过上述说的经过处理后优先使用本地的`webpack`，而非使用全局的`webpack`进行打包，会少掉很多`bug`。

```
npm install webpack@3.6.0 --save-dev // 开发时依赖
```

执行上述代码会在`package.json`中多出一个`devDependencies`字段，用来存储所有我们在开发过程中需要使用到的东西。

`package.json`中的`scripts`的脚本在执行的时候，会按照一定的顺序寻找命令对应的位置，首先会寻找本地的`node_modules/.bin`路径中对应的命令，如果没有找到，会去全局的环境变量中寻找。



# `loader`的配置

在前面我们主要使用`webpack`来处理`js`代码，并且`webpack`会自动处理`js`之间的相互的依赖。但是在开发中我们还需要处理加载`css`、图片、也包括一些高级的将`ES6`转换成为`ES5`代码，将`TypeScript`转成`ES5`代码，将`scss`、`less`转成`css`，将`.jsx`、`.vue`文件转成`js`文件等等。对于`webpack`本身是不支持这些功能的，但只要给`webpack`扩展对应的`loader`就可以了。

`loader`使用过程：

- 通过`npm`安装需要使用的`loader`。
- 在`webpack.comfig.js`中的`modules`关键字下进行配置。

以下是打包`css`文件的`loader`配置：

安装：

![loader-css](C:\Users\lenovo\Desktop\2019年11月19日始\notes\Vue\img\loader-css.png)

配置：

[官网]( https://webpack.js.org/loaders/css-loader/ )

![loaders](C:\Users\lenovo\Desktop\2019年11月19日始\notes\Vue\img\loaders.png)

```shell
// 安装css-loader
npm install --save-dev css-loader
// 配置,官网上有呢
```

![cssloader配置](C:\Users\lenovo\Desktop\2019年11月19日始\notes\Vue\img\cssloader配置.png)

```shell
// 安装style-loader
npm install --save-dev style-loader
// 配置和css-loader相同
```

启动`npm run bulid`，就可以发现`css`样式文件已经成功被打包起来来，对应的样式文件也成功被应用到界面上了。